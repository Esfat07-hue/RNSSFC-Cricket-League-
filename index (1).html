<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶Ü‡¶ï‡¶¨‡¶∞‡¶®‡¶ó‡¶∞ ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶ ‡¶´‡¶æ‡¶®‡ßç‡¶° - ‡¶≤‡¶æ‡¶á‡¶≠ ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;600;700&display=swap');
        body { font-family: 'Hind Siliguri', sans-serif; background: #f1f5f9; }
        .progress-bar-animated { transition: width 1.5s ease-in-out; }
    </style>
</head>
<body class="py-10 px-4">

    <div class="max-w-md mx-auto space-y-6">
        <div class="bg-white rounded-[2.5rem] shadow-2xl overflow-hidden border border-gray-100">
            <div class="bg-emerald-800 p-8 text-white text-center">
                <h1 class="text-xl font-bold uppercase tracking-tight">‡¶Ü‡¶ï‡¶¨‡¶∞‡¶®‡¶ó‡¶∞ ‡¶¨‡¶æ‡¶á‡¶§‡ßÅ‡¶≤ ‡¶Ü‡¶Æ‡¶æ‡¶® ‡¶ú‡¶æ‡¶Æ‡ßá ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶</h1>
                <p class="text-emerald-200 text-sm mt-1">‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶‡ßá‡¶∞ ‡¶¶‡ßá‡ßü‡¶æ‡¶≤ ‡¶ò‡ßú‡¶ø‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶´‡¶æ‡¶®‡ßç‡¶°</p>
            </div>

            <div class="p-8 space-y-6">
                <div class="relative pt-1">
                    <div class="flex mb-4 items-center justify-between">
                        <span class="text-[10px] font-black py-1 px-3 uppercase rounded-full text-emerald-700 bg-emerald-100 tracking-widest">‡¶´‡¶æ‡¶®‡ßç‡¶° ‡¶™‡ßç‡¶∞‡¶ó‡ßç‡¶∞‡ßá‡¶∏</span>
                        <span id="percentText" class="text-sm font-black text-emerald-600">0%</span>
                    </div>
                    <div class="overflow-hidden h-5 mb-4 flex rounded-full bg-emerald-100 shadow-inner">
                        <div id="progressBar" style="width:0%" class="progress-bar-animated bg-gradient-to-r from-emerald-500 to-teal-400 shadow-lg"></div>
                    </div>
                </div>

                <div class="grid grid-cols-2 gap-4 text-center">
                    <div class="bg-emerald-50 p-4 rounded-3xl border border-emerald-100">
                        <p class="text-[10px] font-bold text-emerald-800 uppercase opacity-60">‡¶â‡¶†‡ßá‡¶õ‡ßá</p>
                        <p class="text-2xl font-black text-emerald-900">‡ß≥ <span id="raisedAmount">0</span></p>
                    </div>
                    <div class="bg-rose-50 p-4 rounded-3xl border border-rose-100">
                        <p class="text-[10px] font-bold text-rose-800 uppercase opacity-60">‡¶¨‡¶æ‡¶ï‡¶ø ‡¶Ü‡¶õ‡ßá</p>
                        <p class="text-2xl font-black text-rose-900">‡ß≥ <span id="remainingAmount">15,000</span></p>
                    </div>
                </div>
            </div>
        </div>

        <div class="bg-white rounded-[2.5rem] shadow-xl p-6 border border-gray-100">
            <h3 class="text-center font-black text-gray-400 mb-6 tracking-[0.2em] uppercase text-[10px]">
                üèÜ ‡¶¶‡¶æ‡¶§‡¶æ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ (‡¶¶‡ßá‡¶∂ ‡¶ì ‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ ‡¶∏‡¶π)
            </h3>
            
            <div id="donorList" class="space-y-3">
                </div>

            <div class="mt-8 pt-6 border-t border-gray-50 text-center">
                <p class="text-[10px] font-bold text-gray-400 uppercase tracking-widest">‡¶Ü‡ßü‡ßã‡¶ú‡¶ï</p>
                <p class="text-sm font-bold text-emerald-800">‡¶Ü‡¶ï‡¶¨‡¶∞‡¶®‡¶ó‡¶∞ ‡¶Ø‡ßÅ‡¶¨ ‡¶ê‡¶ï‡ßç‡¶Ø ‡¶∏‡¶Æ‡¶æ‡¶ú</p>
            </div>
        </div>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyA_QgoxNz9qdChtTsFQip1vjnF9X4iC0LE",
            authDomain: "deliverr-575e9.firebaseapp.com",
            databaseURL: "https://deliverr-575e9-default-rtdb.firebaseio.com",
            projectId: "deliverr-575e9",
            storageBucket: "deliverr-575e9.firebasestorage.app",
            messagingSenderId: "606620077620",
            appId: "1:606620077620:web:d59003b5a96ed5f3f20461"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        const TARGET = 15000;

        // ‡¶™‡ßç‡¶∞‡¶ó‡ßç‡¶∞‡ßá‡¶∏ ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
        db.ref('totalFund').on('value', (s) => {
            const raised = s.val() || 0;
            const remaining = Math.max(0, TARGET - raised);
            const percent = Math.min(100, (raised / TARGET) * 100).toFixed(1);
            
            document.getElementById('raisedAmount').innerText = raised.toLocaleString('bn-BD');
            document.getElementById('remainingAmount').innerText = remaining.toLocaleString('bn-BD');
            document.getElementById('progressBar').style.width = percent + "%";
            document.getElementById('percentText').innerText = percent + "%";
        });

        // ‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶¶‡¶æ‡¶§‡¶æ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ ‡¶≤‡ßã‡¶°
        db.ref('donors').orderByChild('amount').limitToLast(20).on('value', (snapshot) => {
            const list = document.getElementById('donorList');
            list.innerHTML = "";
            let donors = [];
            snapshot.forEach(child => { donors.push(child.val()); });
            
            donors.reverse().forEach((d) => {
                list.innerHTML += `
                    <div class="flex justify-between items-center p-4 bg-gray-50 rounded-2xl border border-gray-100 transition-all hover:scale-[1.02]">
                        <div class="flex flex-col">
                            <span class="font-bold text-gray-800 text-sm">${d.name}</span>
                            <div class="flex items-center gap-2 mt-1">
                                <span class="text-[9px] bg-white px-2 py-0.5 rounded-full border border-gray-200 text-gray-500 font-bold">
                                    üìç ${d.country || '‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂'}
                                </span>
                                <span class="text-[9px] bg-emerald-100 px-2 py-0.5 rounded-full text-emerald-700 font-bold uppercase">
                                    üí≥ ${d.method || '‡¶π‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶ï‡ßç‡¶Ø‡¶æ‡¶∂'}
                                </span>
                            </div>
                        </div>
                        <div class="text-right">
                            <span class="text-lg font-black text-emerald-600 italic">‡ß≥${d.amount.toLocaleString('bn-BD')}</span>
                        </div>
                    </div>`;
            });

            if(donors.length === 0) {
                list.innerHTML = "<p class='text-center text-gray-400 text-xs py-4'>‡¶è‡¶ñ‡¶®‡ßã ‡¶ï‡ßã‡¶®‡ßã ‡¶¶‡¶æ‡¶§‡¶æ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ‡¶≠‡ßÅ‡¶ï‡ßç‡¶§ ‡¶π‡ßü‡¶®‡¶ø</p>";
            }
        });
    </script>
</body>
</html>